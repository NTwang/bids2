(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1177:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(){var e={};try{e=JSON.parse(localStorage.getItem("permission"))}catch(t){console.log(t)}return e[location.hash.replace("#","").split("?")[0]]||{}}},1178:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return l}),a.d(t,"b",function(){return c});var n=a(21),o=a.n(n),r=function(e){var t=[{text:o.a.get("sms._EXAMINATION_PASSED_"),code:"AP"},{text:o.a.get("sms._AUDIT_NOT_PASSED_"),code:"ANP"},{text:o.a.get("sms._PENDING_REVIEW_"),code:"PA"}];return e?(t.filter(function(t){return t.code==e})[0]||{}).text:t},i=function(e){var t=[{text:o.a.get("common._IN_PRODUCTION_"),code:"OP"},{text:o.a.get("common._COMPLETED_"),code:"OC"},{text:o.a.get("common._OUT_OF_DATE_"),code:"OV"}];return e?(t.filter(function(t){return t.code==e})[0]||{}).text:t},l=function(e){var t=[{text:o.a.get("sms._ORDER_PLACED_"),code:"OD"},{text:o.a.get("sms._IN_PRODUCTION_"),code:"OI"},{text:o.a.get("sms._ORDER_INVALID_"),code:"OV"}];return e?(t.filter(function(t){return t.code==e})[0]||{}).text:t},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[{text:"International Express",code:"International Express"},{text:"Airline+Express",code:"Airline+Express"},{text:"Marine",code:"Marine"},{text:"Domestic Express",code:"Domestic Express"},{text:"EUB",code:"EUB"},{text:"Interal Transfer",code:"Interal Transfer"}];return e?(t.filter(function(t){return t.code==e})[0]||{}).text:t}},1217:function(e,t,a){"use strict";a.r(t);var n=a(24),o=a(16),r=a(17),i=a(19),l=a(18),c=a(20),s=a(1),d=a.n(s),m=a(39),u=a(21),_=a.n(u),p=a(28),E=a.n(p),O=a(291),f=a(15),g=a.n(f),I=a(373),h=a(98),C=a(292),x=a(1178),S=a(1177),T=O.n.info,D=O.n.confirm,v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleSearch=function(e){e.preventDefault(),a.table.draw()},a.rowSelectionOnChange=function(e,t){a.setState({ids:e})},a.handleInvalid=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e?[e]:a.state.ids;0!=t.length?D({title:_.a.get("common._SURE_INVALID_"),onOk:function(){a.dispatch({type:"purchaseOrder/invalid",payload:{ids:t},cb:function(e){var t=e.status,n=e.msg;0!=t?a.table.draw():O.w.error(n)}})}}):T({title:_.a.get("common._PLEASE_SELECT_PURCHASE_ORDER_")})},a.handleDownload=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";C.a["order/download"]({orderNo:e}).then(function(e){var t=e.status,a=e.msg,n=e.content,o=void 0===n?{}:n;if(!t)return O.w.error(a),!1;Object(h.a)({sheetName:_.a.get("menu._PURCHASE_ORDER_"),columns:[{title:"PN",key:"pn"},{title:_.a.get("pms._PRODUCT_NAME_"),dataIndex:"productName"},{title:_.a.get("common._SPECIFICATION_"),dataIndex:"specification"},{title:_.a.get("pms._GENERAL_COST_"),dataIndex:"generalCost"},{title:_.a.get("pms._PRODUCT_COST_"),dataIndex:"productCost"},{title:_.a.get("pms._PACKAGE_COST_"),dataIndex:"packageCost"},{title:_.a.get("pms._STICKER_COST_"),dataIndex:"stickerCost"},{title:_.a.get("pms._ACCESSORIES_COST_"),dataIndex:"accessoriesCost"},{title:_.a.get("pms._ASSEMBLE_COST_"),dataIndex:"assembleCost"},{title:_.a.get("pms._PRINT_COST_"),dataIndex:"printCost"},{title:_.a.get("pms._LABEL_COST_"),dataIndex:"labelCost"},{title:_.a.get("pms._BOX_COST_"),dataIndex:"boxCost"},{title:_.a.get("pms._SHIPPING_COST_"),dataIndex:"shippingCost"},{title:_.a.get("pms._MOULD_COST_"),dataIndex:"mouldCost"},{title:_.a.get("common._QUANTIFY_"),key:"qty"},{title:_.a.get("common._SUPPLIER_"),key:"supplier"}],list:o.list||[]})})},a.state={ids:[]},a.dispatch=a.props.dispatch,a.permission=Object(S.a)(),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.table.draw(),this.dispatch({type:"purchaseOrder/supplierList",payload:{}})}},{key:"componentWillReceiveProps",value:function(){var e=this;this.columns=[{title:_.a.get("common._DATE_"),dataIndex:"date",align:"center"},{title:_.a.get("common._ORDER_NO_"),dataIndex:"orderNo"},{title:_.a.get("common._SUPPLIER_"),dataIndex:"supplier"},{title:_.a.get("sms._BUYER_"),dataIndex:"buyer"},{title:_.a.get("common._AUDITOR_"),dataIndex:"auditor"},{title:_.a.get("common._STATUS_"),dataIndex:"status",render:function(e){return Object(x.d)(e)}},{title:_.a.get("common._OPERATION_"),dataIndex:"action",render:function(t,a){var n=a.orderNo,o=a.status,r=a.id;return d.a.createElement("span",null,e.permission.downlaod&&d.a.createElement("a",{href:"javascript:;",onClick:function(){return e.handleDownload(n)}},_.a.get("common._DOWNLOAD_")),"OD"==o&&e.permission.edit&&d.a.createElement("span",null,d.a.createElement(I.a,{type:"vertical"}),d.a.createElement("a",{href:"javascript:;",onClick:function(){return e.handleInvalid(r)}},_.a.get("common._INVALID_"))))}}]}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldsValue,o=t.getFieldDecorator,r=t.getFieldValue,i=this.props.purchaseOrder,l=i.orderList,c=void 0===l?{}:l,s=i.supplierList,m=void 0===s?{}:s;return d.a.createElement(O.h,null,d.a.createElement(O.d,{onSubmit:this.handleSearch},d.a.createElement(O.k,{label:_.a.get("common._ORDER_NO_"),htmlType:o("orderNo")(d.a.createElement(O.l,{size:"small",autoComplete:"off"}))}),d.a.createElement(O.k,{label:_.a.get("common._SUPPLIER_"),htmlType:o("supplier")(d.a.createElement(O.r,{size:"small",mode:"multiple"},E.a.map(m.list||[],function(e,t){return d.a.createElement(O.r.Option,{key:t,value:e.code},e.name)})))}),d.a.createElement(O.k,{label:_.a.get("sms._BUYER_"),htmlType:o("buyer")(d.a.createElement(O.l,{size:"small",autoComplete:"off"}))}),d.a.createElement(O.k,{label:_.a.get("common._AUDITOR_"),htmlType:o("auditor")(d.a.createElement(O.l,{size:"small",autoComplete:"off"}))}),d.a.createElement(O.k,{label:_.a.get("common._DATE_"),htmlType:o("date",{initialValue:[g()().subtract(29,"days"),g()()]})(d.a.createElement(O.o,{size:"small",ranges:{"\u4eca\u5929":[g()(),g()()],"\u5f53\u6708":[g()().startOf("month"),g()().endOf("month")],"\u672c\u5468":[g()().startOf("week"),g()().endOf("week")]}}))}),d.a.createElement(O.k,null,d.a.createElement(O.b,{align:"left"},d.a.createElement(O.a,{htmlType:"submit",type:"primary",size:"small",icon:"search"},_.a.get("common._SEARCH_"))))),d.a.createElement(O.e,{title:_.a.get("common._LIST_"),ref:function(t){return e.table=t},style:{marginTop:20},columns:this.columns,dataSource:c.list||[],rowKey:function(e){return e.id},total:c.total,rowSelection:{type:"checkBox",onChange:this.rowSelectionOnChange,getCheckboxProps:function(e){return{disabled:"OD"!=e.status,name:"id",value:e.id}}},required:{type:"purchaseOrder/queryList",formValues:Object(n.a)({},E.a.omit(a(),["date"]),{start_date:r("date")[0]&&g()(r("date")[0]).format("YYYY-MM-DD"),end_date:r("date")[1]&&g()(r("date")[1]).format("YYYY-MM-DD")})},actionsTop:[this.permission.edit&&d.a.createElement(O.a,{onClick:function(){return e.handleInvalid()},size:"small",key:"invalid",type:"primary"},_.a.get("common._BATCH_INVALID_"))]}))}}]),t}(d.a.Component);t.default=Object(m.connect)(function(e){return e})(O.j.create()(v))}}]);