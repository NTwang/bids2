(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1177:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(){var e={};try{e=JSON.parse(localStorage.getItem("permission"))}catch(t){console.log(t)}return e[location.hash.replace("#","").split("?")[0]]||{}}},1182:function(e,t,a){"use strict";var n=a(144);t.a=Object(n.a)("replenishment",["analysis","plan","plan/batchAdd","plan/delete"],"")},1188:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r}),a.d(t,"c",function(){return l});a(21);var n=function(e){var t=[{text:"\u81ea\u6709\u8d26\u53f7",code:"ownAccount"},{text:"Reviewer",code:"reviewer"},{text:"\u670d\u52a1\u5546",code:"serviceProvider"},{text:"FB Ads",code:"FB Ads"}];return e?(t.filter(function(t){return t.code==e})[0]||{}).text:t},r=function(e){var t={US:"US",JP:"JP",UK:"UK",AU:"AU"};return e?t.key||e:t},l=function(e){var t={Marine:"Marine","Airline+Express":"Airline+Express",Express:"Express",Railway:"Railway","Marine+Express":"Marine+Express"};return e?t.key||e:t}},1196:function(e,t,a){e.exports=a.p+"static/media/replenishmentPlan.1ab80261.xlsx"},1238:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(16),l=a(17),o=a(19),i=a(18),c=a(20),s=a(1),m=a.n(s),d=a(39),u=a(291),p=a(21),E=a.n(p),h=a(1188),f=a(28),_=a.n(f),b=a(15),g=a.n(b),y=a(1196),k=a.n(y),O=a(1182),v=(a(98),a(1177)),T=u.n.info,w=u.n.confirm,A=Object(h.a)(),D=Object(h.c)(),x=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleSearch=function(e){e.preventDefault(),a.table.draw()},a.rowSelectionOnChange=function(e,t){a.setState({ids:e})},a.handleDelete=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e?[e]:a.state.ids;0!=t.length?w({title:E.a.get("common._SURE_DELETE_"),onOk:function(){a.dispatch({type:"repPlan/delete",payload:{ids:t},cb:function(e){var t=e.status,n=e.msg;0!=t?a.table.draw():u.w.error(n)}})}}):T({title:E.a.get("common._PLEASE_SELECT_REPLENISHMENT_PLAN_")})},a.state={ids:[]},a.dispatch=a.props.dispatch,a.permission=Object(v.a)(),a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.table.draw()}},{key:"componentWillReceiveProps",value:function(){var e=this;this.columns=[{title:E.a.get("common._DATE_"),dataIndex:"date",align:"center"},{title:E.a.get("oms._REPLENISHMENT_PLAN_ID_"),dataIndex:"replenishmentPlanId"},{title:E.a.get("oms._MARKET_"),dataIndex:"market",render:function(e){return A.market}},{title:E.a.get("oms._TRANSPORTATION_"),dataIndex:"transportation"},{title:E.a.get("common._OPERATOR_"),dataIndex:"operator"},{title:E.a.get("common._OPERATION_"),dataIndex:"id",render:function(t,a){var n=a.downloadUrl;return m.a.createElement("span",null,e.permission.edit&&m.a.createElement("a",{href:"javascript:;",key:"delete",onClick:function(){return e.handleDelete(t)}},E.a.get("common._DELETE_")),n&&e.permission.download&&m.a.createElement("span",null,m.a.createElement(u.i,{type:"vertical"}),m.a.createElement("a",{href:n,key:"download",target:"_blank"},E.a.get("common._DOWNLOAD_"))))}}]}},{key:"render",value:function(){var e=this,t=this.props.repPlan.planList,a=this.props.form,r=a.getFieldsValue,l=a.getFieldValue,o=a.getFieldDecorator,i=[];return this.permission.edit&&(i=[m.a.createElement(u.a,{key:"batchDelete",onClick:function(){return e.handleDelete()},size:"small",icon:"delete",type:"primary",style:{marginRight:10}},E.a.get("common._BATCH_DELETE_")),m.a.createElement(u.a,{key:"uploadExcel",href:k.a,target:"_blank",size:"small",icon:"download",type:"primary",style:{marginRight:10}},E.a.get("common._DOWNLOAD_TEMPLATE_")),m.a.createElement(u.t,{key:"uplaod",local:!0,excelHeader:{Market:"market"},batchUploadApi:O.a["plan/batchAdd"],table:this.table,fileSubmit:this.fileSubmit})]),m.a.createElement(u.h,null,m.a.createElement(u.d,{onSubmit:this.handleSearch},m.a.createElement(u.k,{label:"Plan ID",htmlType:o("planId")(m.a.createElement(u.l,{size:"small",autoComplete:"off"}))}),m.a.createElement(u.k,{label:"Operator",htmlType:o("operator")(m.a.createElement(u.l,{size:"small",autoComplete:"off"}))}),m.a.createElement(u.k,{label:"Market",htmlType:o("market")(m.a.createElement(u.r,{size:"small"},_.a.map(A,function(e,t){return m.a.createElement(u.r.Option,{key:e,value:e},t)})))}),m.a.createElement(u.k,{label:"Transportation",htmlType:o("transportation")(m.a.createElement(u.r,{size:"small"},_.a.map(D,function(e,t){return m.a.createElement(u.r.Option,{key:e,value:e},t)})))}),m.a.createElement(u.k,{label:E.a.get("common._DATE_"),htmlType:o("date",{initialValue:[void 0,void 0]})(m.a.createElement(u.o,{size:"small",ranges:{"\u4eca\u5929":[g()(),g()()],"\u5f53\u6708":[g()().startOf("month"),g()().endOf("month")],"\u672c\u5468":[g()().startOf("week"),g()().endOf("week")]}}))}),m.a.createElement(u.b,{align:"right"},m.a.createElement(u.a,{htmlType:"submit",type:"primary",size:"small",icon:"search"},E.a.get("common._SEARCH_")))),m.a.createElement(u.e,{ref:function(t){return e.table=t},title:E.a.get("common._LIST_"),style:{marginTop:10},dataSource:t.list||[],rowKey:function(e){return e.id},columns:this.columns,total:t.total,actionsTop:i,required:{type:"repPlan/queryList",formValues:Object(n.a)({},_.a.omit(r(),["date"]),{startDate:l("date")[0]&&g()(l("date")[0]).format("YYYY-MM-DD"),endDate:l("date")[1]&&g()(l("date")[1]).format("YYYY-MM-DD")})},rowSelection:{type:"checkBox",onChange:this.rowSelectionOnChange}}))}}]),t}(m.a.Component);t.default=Object(d.connect)(function(e){return e})(u.j.create("planForm")(x))}}]);