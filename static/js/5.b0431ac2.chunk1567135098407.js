(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1177:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(){var e={};try{e=JSON.parse(localStorage.getItem("permission"))}catch(t){console.log(t)}return e[location.hash.replace("#","").split("?")[0]]||{}}},1181:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n(21);var a=function(e){var t=[{text:"US",code:"US"},{text:"JP",code:"JP"},{text:"UK",code:"UK"},{text:"AU",code:"AU"},{text:"DE",code:"DE"},{text:"FR",code:"FR"},{text:"IT",code:"IT"},{text:"ES",code:"ES"}];return e?(t.filter(function(t){return t.code==e})[0]||{}).text:t}},1185:function(e,t,n){"use strict";var a=n(144);t.a=Object(a.a)("userPermission",["list","add","edit","delete","detail","detail/save"],"")},1248:function(e,t,n){"use strict";n.r(t);var a=n(24),i=n(16),c=n(17),o=n(19),l=n(18),r=n(20),s=n(1),u=n.n(s),p=n(21),d=n.n(p),f=(n(323),n(28)),m=n.n(f),h=n(291),g=n(1181),v=n(283),y=n(612),b=n(41),E=n(43),O=n(39),j=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).onChange=function(e){var t=n.props.accountPermissions.menus,a=(n.props.id||"").replace(/\[/g,".").replace(/\]/g,"").split(".").slice(1),i=t;a.forEach(function(e,t){t==a.length-1?(i[e]=!n.state.checked,"none"!=e?i.none=!1:(i.admin=!1,i.edit=!1,i.view=!1,i.download=!1,i.approval=!1,i.section=[])):i=i[e]}),n.dispatch({type:"accountPermissions/update",payload:{menus:t}})},n.state={checked:n.props.value},n.dispatch=n.props.dispatch,n}return Object(r.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({checked:e.value})}},{key:"render",value:function(){var e=this.props,t=(e.checked,Object(E.a)(e,["checked"]));return u.a.createElement(h.f,Object.assign({},t,{checked:this.state.checked,onChange:this.onChange}))}}]),t}(u.a.Component),w=Object(O.connect)(function(e){return e})(j),P=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).onChange=function(e){var t=e;"all"==e[e.length-1]&&(t=["all"]),e.length>1&&"all"==e[0]&&(t=e.slice(0).splice(1));var a=n.props.accountPermissions.menus,i=(n.props.id||"").replace(/\[/g,".").replace(/\]/g,"").split(".").slice(1),c=a;i.forEach(function(e,n){n==i.length-1?(c[e]=t,c.none=!1):c=c[e]}),n.props.dispatch({type:"accountPermissions/update",payload:{menus:a}})},n}return Object(r.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.checked,e.children),n=Object(E.a)(e,["checked","children"]);return u.a.createElement(h.r,Object.assign({},n,{onChange:this.onChange,loading:!1}),t)}}]),t}(u.a.Component);P.Option=h.r.Option;var x=Object(O.connect)(function(e){return e})(P),T=n(1185),S=n(1177),k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).save=function(e){e.preventDefault();var t=n.props.accountPermissions.menus,i=n.props.form.getFieldsValue(),c=m.a.defaultsDeep({},t,i.menus);T.a["detail/save"](Object(a.a)({menus:c},JSON.parse(sessionStorage.getItem("userPermission")||"{}"))).then(function(e){var t=e.status,n=e.msg;if(0==t)return v.a.error(n);location.hash="/USER/Setting/UserPermission"})},n.hanleSelect=function(e,t){var a=n.props.accountPermissions.menus;a[t].child.map(function(t,a){return t.child.length?(t.permission&&n.section(e,t),t.child.map(function(t,a){return n.section(e,t),t.child.length?t.child.map(function(t,a){n.section(e,t)}):t})):n.section(e,t)}),n.dispatch({type:"accountPermissions/update",payload:{menus:a}})},n.section=function(e,t){return"section"==e?(t[e]=["all"],t.none=!1):"none"==e?(t[e]=!0,t.admin=!1,t.edit=!1,t.section=[],t.view=!1,t.download=!1,t.approval=!1):(t.none=!1,t[e]=!0),t},n.dispatch=n.props.dispatch,n.permission=Object(S.a)(),n}return Object(r.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.state,n=void 0===t?{}:t;m.a.isEmpty(n)?n=JSON.parse(sessionStorage.getItem("userPermission")||"{}"):sessionStorage.setItem("userPermission",JSON.stringify(n)),T.a.detail(Object(a.a)({},n)).then(function(t){var n=t.status,a=t.msg,i=t.content;if(0==n)return v.a.error(a),!1;e.dispatch({type:"accountPermissions/update",payload:{menus:i.list||[]}})})}},{key:"render",value:function(){var e=this;this.titles=[{title:"None",value:"none"},{title:"View",value:"view"},{title:"Section",value:"section"},{title:"Edit",value:"edit"},{title:"Download",value:"download"},{title:"Admin",value:"admin"},{title:"Approval",value:"approval"}],this.span={xs:12,sm:6,md:3};var t=this.props.form.getFieldDecorator,n=this.props.accountPermissions.menus;return u.a.createElement(h.h,null,u.a.createElement("div",{style:{textAlign:"right",marginBottom:5}},u.a.createElement(y.a,null,u.a.createElement(h.a,{size:"small",style:{marginRight:5}},u.a.createElement(b.Link,{to:"/USER/Setting/UserPermission"},"\u53d6\u6d88")),this.permission.edit&&u.a.createElement(h.a,{type:"primary",size:"small",onClick:this.save},"\u4fdd\u5b58"))),u.a.createElement(h.j,null,n.map(function(n,a){return u.a.createElement("div",{key:a,style:{padding:10,border:"1px solid #ccc",marginBottom:10}},u.a.createElement(h.q,{gutter:8},u.a.createElement(h.g,e.span,u.a.createElement("strong",null,d.a.get(n.id))),e.titles.map(function(t,n){return u.a.createElement(h.g,Object.assign({key:n,align:"center"},e.span),u.a.createElement(h.a,{onClick:function(){return e.hanleSelect(t.value,a)},size:"small",type:"primary",style:{minWidth:100}},t.title))})),n.child.length&&n.child.map(function(n,i){return n.child.length?n.child.map(function(c,o){var l=[u.a.createElement(h.q,{gutter:8,key:"thirdMenu"},u.a.createElement(h.g,e.span,"".concat(d.a.get(n.id),"-").concat(d.a.get(c.id))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].none"),{initialValue:c.none})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].view"),{initialValue:c.view})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].section"),{initialValue:c.section})(u.a.createElement(x,{size:"small",mode:"multiple"},u.a.createElement(x.Option,{value:"all"},"ALL"),m.a.map(Object(g.a)(),function(e){return u.a.createElement(x.Option,{value:e.code,key:e.code},e.text)})))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].edit"),{initialValue:c.edit})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].download"),{initialValue:c.download})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].admin"),{initialValue:c.admin})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].approval"),{initialValue:c.approval})(u.a.createElement(w,null))))];return n.permission&&l.unshift(u.a.createElement(h.q,{gutter:8,key:"secondMenuDetail"},u.a.createElement(h.g,e.span,"".concat(d.a.get(n.id))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].none"),{initialValue:n.none})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].view"),{initialValue:n.view})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].section"),{initialValue:n.section})(u.a.createElement(x,{size:"small",mode:"multiple"},u.a.createElement(x.Option,{value:"all"},"ALL"),m.a.map(Object(g.a)(),function(e){return u.a.createElement(x.Option,{key:e.code,value:e.code},e.text)})))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].edit"),{initialValue:n.edit})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].download"),{initialValue:n.download})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].admin"),{initialValue:n.admin})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].approval"),{initialValue:n.approval})(u.a.createElement(w,null))))),c.child.length&&c.child.forEach(function(r,s){l.push(u.a.createElement(h.q,{gutter:8,key:"thirdMenuDetail"},u.a.createElement(h.g,e.span,"".concat(d.a.get(n.id),"-").concat(d.a.get(c.id),"-").concat(d.a.get(r.id))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].child[").concat(s,"].none"),{initialValue:r.none})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].child[").concat(s,"].view"),{initialValue:r.view})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].child[").concat(s,"].section"),{initialValue:r.section})(u.a.createElement(x,{size:"small",mode:"multiple"},u.a.createElement(x.Option,{value:"all"},"ALL"),m.a.map(Object(g.a)(),function(e,t){return u.a.createElement(x.Option,{key:t,value:e.code},e.text)})))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].child[").concat(s,"].edit"),{initialValue:r.edit})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].child[").concat(s,"].download"),{initialValue:r.download})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].child[").concat(s,"].admin"),{initialValue:r.admin})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].child[").concat(o,"].child[").concat(s,"].approval"),{initialValue:r.approval})(u.a.createElement(w,null)))))}),l}):u.a.createElement(h.q,{gutter:8,key:i},u.a.createElement(h.g,e.span,"".concat(d.a.get(n.id))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].none"),{initialValue:n.none})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].view"),{initialValue:n.view})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].section"),{initialValue:n.section})(u.a.createElement(x,{size:"small",mode:"multiple"},u.a.createElement(x.Option,{value:"all"},"ALL"),m.a.map(Object(g.a)(),function(e,t){return u.a.createElement(x.Option,{key:t,value:e.code},e.text)})))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].edit"),{initialValue:n.edit})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].download"),{initialValue:n.download})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].admin"),{initialValue:n.admin})(u.a.createElement(w,null))),u.a.createElement(h.g,Object.assign({align:"center"},e.span,{style:{paddingTop:5}}),t("menus[".concat(a,"].child[").concat(i,"].approove"),{initialValue:n.approval})(u.a.createElement(w,null))))}))})))}}]),t}(s.Component);t.default=Object(O.connect)(function(e){return e})(h.j.create()(Object(b.withRouter)(k)))},612:function(e,t,n){"use strict";var a=n(1),i=n(11),c=n(2),o=n.n(c),l=n(23),r=n(7),s=n(35),u=n.n(s);function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e){var t,n=function(){if(null==t){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];t=u()(function(n){return function(){t=null,e.apply(void 0,p(n))}}(a))}};return n.cancel=function(){return u.a.cancel(t)},n}function f(){return function(e,t,n){var a=n.value,i=!1;return{configurable:!0,get:function(){if(i||this===e.prototype||this.hasOwnProperty(t))return a;var n=d(a.bind(this));return i=!0,Object.defineProperty(this,t,{value:n,configurable:!0,writable:!0}),i=!1,n}}}}var m=n(339),h=n(14),g=n(60);function v(e){return e!==window?e.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function y(e,t,n){if(void 0!==n&&t.top>e.top-n)return n+t.top}function b(e,t,n){if(void 0!==n&&t.bottom<e.bottom+n)return n+(window.innerHeight-t.bottom)}var E=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],O=[];function j(e,t){if(e){var n=O.find(function(t){return t.target===e});n?n.affixList.push(t):(n={target:e,affixList:[t],eventHandlers:{}},O.push(n),E.forEach(function(t){n.eventHandlers[t]=Object(g.a)(e,t,function(){n.affixList.forEach(function(e){e.lazyUpdatePosition()})})}))}}function w(e){var t=O.find(function(t){var n=t.affixList.some(function(t){return t===e});return n&&(t.affixList=t.affixList.filter(function(t){return t!==e})),n});t&&0===t.affixList.length&&(O=O.filter(function(e){return e!==t}),E.forEach(function(e){var n=t.eventHandlers[e];n&&n.remove&&n.remove()}))}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function T(e,t){return!t||"object"!==V(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){return(V="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A,N=function(e,t,n,a){var i,c=arguments.length,o=c<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"===typeof Reflect?"undefined":V(Reflect))&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(c<3?i(o):c>3?i(t,n,o):i(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e[e.None=0]="None",e[e.Prepare=1]="Prepare"}(A||(A={}));var C=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=T(this,S(t).apply(this,arguments))).state={status:A.None,lastAffix:!1,prevTarget:null},e.getOffsetTop=function(){var t=e.props,n=t.offset,a=t.offsetBottom,i=e.props.offsetTop;return"undefined"===typeof i&&(i=n,Object(h.a)("undefined"===typeof n,"Affix","`offset` is deprecated. Please use `offsetTop` instead.")),void 0===a&&void 0===i&&(i=0),i},e.getOffsetBottom=function(){return e.props.offsetBottom},e.savePlaceholderNode=function(t){e.placeholderNode=t},e.saveFixedNode=function(t){e.fixedNode=t},e.measure=function(){var t=e.state,n=t.status,a=t.lastAffix,i=e.props,c=i.target,o=i.onChange;if(n===A.Prepare&&e.fixedNode&&e.placeholderNode&&c){var l=e.getOffsetTop(),r=e.getOffsetBottom(),s=c();if(s){var u={status:A.None},p=v(s),d=v(e.placeholderNode),f=y(d,p,l),m=b(d,p,r);void 0!==f?(u.affixStyle={position:"fixed",top:f,width:d.width,height:d.height},u.placeholderStyle={width:d.width,height:d.height}):void 0!==m&&(u.affixStyle={position:"fixed",bottom:m,width:d.width,height:d.height},u.placeholderStyle={width:d.width,height:d.height}),u.lastAffix=!!u.affixStyle,o&&a!==u.lastAffix&&o(u.lastAffix),e.setState(u)}}},e.prepareMeasure=function(){e.setState({status:A.Prepare,affixStyle:void 0,placeholderStyle:void 0})},e.renderAffix=function(t){var n,i,c,r=t.getPrefixCls,s=e.state,u=s.affixStyle,p=s.placeholderStyle,d=e.props,f=d.prefixCls,h=d.children,g=o()((n={},i=r("affix",f),c=u,i in n?Object.defineProperty(n,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[i]=c,n)),v=Object(l.a)(e.props,["prefixCls","offsetTop","offsetBottom","target","onChange"]);return a.createElement(m.a,{onResize:function(){e.updatePosition()}},a.createElement("div",P({},v,{ref:e.savePlaceholderNode}),u&&a.createElement("div",{style:p,"aria-hidden":"true"}),a.createElement("div",{className:g,ref:e.saveFixedNode,style:u},a.createElement(m.a,{onResize:function(){e.updatePosition()}},h))))},e}var n,i,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,a["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=this,t=this.props.target;t&&(this.timeout=setTimeout(function(){j(t(),e),e.updatePosition()}))}},{key:"componentDidUpdate",value:function(e){var t=this.state.prevTarget,n=this.props.target,a=null;n&&(a=n()||null),t!==a&&(w(this),a&&(j(a,this),this.updatePosition()),this.setState({prevTarget:a})),e.offsetTop===this.props.offsetTop&&e.offsetBottom===this.props.offsetBottom||this.updatePosition(),this.measure()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),w(this),this.updatePosition.cancel()}},{key:"updatePosition",value:function(){this.prepareMeasure()}},{key:"lazyUpdatePosition",value:function(){var e=this.props.target,t=this.state.affixStyle;if(e&&t){var n=this.getOffsetTop(),a=this.getOffsetBottom(),i=e();if(i){var c=v(i),o=v(this.placeholderNode),l=y(o,c,n),r=b(o,c,a);if(void 0!==l&&t.top===l||void 0!==r&&t.bottom===r)return}}this.prepareMeasure()}},{key:"render",value:function(){return a.createElement(r.a,null,this.renderAffix)}}])&&x(n.prototype,i),c&&x(n,c),t}();C.defaultProps={target:function(){return"undefined"!==typeof window?window:null}},N([f()],C.prototype,"updatePosition",null),N([f()],C.prototype,"lazyUpdatePosition",null),Object(i.polyfill)(C);t.a=C}}]);